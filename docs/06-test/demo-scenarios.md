# POC 시연 시나리오

## 개요

VOC 자동 처리 시스템 POC 시연을 위한 시나리오 및 데모 데이터를 정의합니다.

---

## 시연 환경 준비

### 1. 사전 조건

```bash
# Backend 실행
cd backend
source .venv/bin/activate
uvicorn app.main:app --reload --port 8000

# Frontend 실행 (별도 터미널)
cd frontend
npm run dev
```

### 2. 시스템 접속

- **Frontend**: http://localhost:5173
- **Backend API**: http://localhost:8000
- **API Docs**: http://localhost:8000/docs

---

## 시연 시나리오

### 시나리오 1: 연동사 오류 (Integration Error)

**목표**: 결제 API 타임아웃 VOC가 자동으로 분석되어 연동사 문의 메일 초안이 생성되는 것을 확인

**시연 순서**:

1. **VOC 입력 화면** (`/voc/new`) 접속
2. 다음 내용 입력:
   ```
   어제 저녁 8시경에 결제를 시도했는데 한참 기다려도 결제가 안 되더라고요.
   로딩만 계속 돌다가 나중에 보니까 결제 실패로 되어 있었어요.
   카드는 정상인데 왜 그런 건가요? 다른 사이트에서는 잘 되는데...
   ```
   - 고객명: 김철수
   - 채널: email
   - 접수일시: (현재 시간)

3. **VOC 제출** 클릭
4. Ticket 상세 화면으로 이동 확인
5. **상태 변화 확인**: `OPEN` → `ANALYZING` → `WAITING_CONFIRM`
6. **분석 결과 확인**:
   - 문제 유형: `integration_error` (연동사 오류)
   - 긴급도: `high`
   - 신뢰도: 0.8 이상
7. **판단 근거 확인**:
   - 로그에서 타임아웃 패턴 발견
   - 결제 API 응답 지연 증거
8. **해결안 확인**:
   - 연동사 문의 메일 초안 생성됨
9. **승인** 클릭 → `DONE` 상태 전이

**예상 Slack 알림**: 긴급 티켓 생성 알림 수신

---

### 시나리오 2: 코드 오류 (Code Error)

**목표**: 환불 버튼 클릭 시 에러 발생 VOC가 코드 수정 제안으로 이어지는 것을 확인

**시연 순서**:

1. **VOC 입력**:
   ```
   주문 상세 페이지에서 '환불 요청' 버튼을 누르면 에러가 뜹니다.
   여러 번 시도해도 같은 에러가 나와요.
   주문번호는 ORD-2024-12345 입니다.
   ```
   - 고객명: 박영희
   - 채널: slack

2. **분석 결과 확인**:
   - 문제 유형: `code_error`
   - 긴급도: `medium`
   - 신뢰도: 0.85 이상

3. **판단 근거 확인**:
   - NullPointerException 발견
   - RefundService.java:145 위치 특정

4. **해결안 확인**:
   - 영향 파일: `RefundService.java`
   - 수정 방향 제안

5. **승인** 클릭

---

### 시나리오 3: 비즈니스 개선 (Business Improvement)

**목표**: UX 개선 요청 VOC가 개선 제안서로 이어지는 것을 확인

**시연 순서**:

1. **VOC 입력**:
   ```
   결제 취소하려고 하는데 버튼이 어디 있는지 모르겠어요.
   주문 상세에서 한참 찾아봤는데 없고, 결국 고객센터에 전화했습니다.
   취소 버튼 좀 잘 보이게 해주세요.
   ```
   - 고객명: 이민수
   - 채널: email

2. **분석 결과 확인**:
   - 문제 유형: `business_improvement`
   - 긴급도: `low`
   - 신뢰도: 0.7 이상

3. **ruled_out 확인**:
   - 에러 로그 없음
   - 시스템 오류 제외

4. **해결안 확인**:
   - UI/UX 개선 제안서
   - 이해관계자 목록

---

### 시나리오 4: 관리자 거부

**목표**: 관리자가 Agent 판단에 동의하지 않을 때 거부 처리하는 흐름 확인

**시연 순서**:

1. 시나리오 1~3 중 하나 진행 후 `WAITING_CONFIRM` 상태
2. **거부** 버튼 클릭
3. 거부 사유 입력:
   ```
   Agent 분석이 정확하지 않습니다. 실제로는 사용자 실수로 판단됩니다.
   ```
4. **거부 확인** 클릭
5. `REJECTED` 상태 확인
6. 거부 사유가 저장되었는지 확인

---

### 시나리오 5: 수동 처리 (정규화 실패)

**목표**: 의미 없는 VOC가 수동 처리로 전환되는 것을 확인

**시연 순서**:

1. **VOC 입력**:
   ```
   ㅋㅋㅋㅋㅋ
   ```
   - 고객명: 테스트
   - 채널: slack

2. **상태 확인**: `MANUAL_REQUIRED`
3. **수동 처리 폼 확인**
4. 처리 결과 입력:
   ```
   의미 없는 VOC로 판단하여 종료 처리합니다.
   ```
5. **수동 처리 완료** 클릭
6. `DONE` 상태 확인

---

### 시나리오 6: 재분석 요청

**목표**: 관리자가 재분석을 요청하는 흐름 확인

**시연 순서**:

1. `WAITING_CONFIRM` 상태 Ticket 준비
2. **재분석** 버튼 클릭
3. `ANALYZING` 상태 전이 확인
4. 분석 완료 후 `WAITING_CONFIRM` 재전이
5. `analyzed_at` 갱신 확인

---

## 데모 데이터

### VOC 샘플 데이터

| ID | VOC 원문 | 예상 유형 | 긴급도 |
|----|----------|-----------|--------|
| DEMO-1 | 결제 타임아웃 | integration_error | high |
| DEMO-2 | 환불 버튼 에러 | code_error | medium |
| DEMO-3 | 취소 버튼 위치 | business_improvement | low |
| DEMO-4 | 의미없는 입력 | MANUAL_REQUIRED | - |

---

## 시연 체크리스트

### 기능 시연

- [ ] VOC 입력 및 Ticket 생성
- [ ] Agent 자동 분석 (정규화 + Solver)
- [ ] 판단 근거 표시
- [ ] 해결안 표시 (유형별)
- [ ] 관리자 승인
- [ ] 관리자 거부 (사유 포함)
- [ ] 수동 처리 완료
- [ ] 재분석 요청
- [ ] Slack 알림 (긴급 티켓)

### UI 시연

- [ ] Ticket 목록 화면
- [ ] 상태별 필터링
- [ ] 긴급도별 필터링
- [ ] 페이지네이션
- [ ] Ticket 상세 화면
- [ ] 상태별 화면 분기

### 품질 확인

- [ ] Agent 판단이 이해 가능한가?
- [ ] 승인 결정을 빠르게 내릴 수 있는가?
- [ ] 거부 시 피드백이 저장되는가?
- [ ] 전체 흐름이 자연스러운가?

---

## 시연 시 주의사항

1. **LLM 응답 시간**: Agent 분석에 최대 60초 소요 가능
2. **Ollama 상태**: 로컬 LLM 서버가 실행 중이어야 함
3. **네트워크**: Slack 알림을 위해 인터넷 연결 필요
4. **데모 데이터**: 시연 전 기존 데이터 정리 권장
